# ref. [Effective Java 3/E]()

---

# Item2. 생성자에 매개변수가 많다면 빌더를 고려하라

---

<aside>
💡 정적 팩터리와 생성자에는 똑같은 제약이 하나 있다. 선택적 매개변수가 많을 떄, 적절히 대응하기 어렵다는 점이다.

</aside>

## [1]. 점층적 생성자 패턴 - 확장하기 어렵다 !

---

- 점층적 생성자 패턴도 쓸 수는 있지만, 매개변수의 개수가 많아지면 클라이언트 코드를 작성하거나 읽기 어렵다.

## [2]. 자바빈즈 패턴 - 일관성이 깨지고, 불변으로 만들 수 없다.

---

<aside>
💡 객체 하나를 만들려면 여러 메서드를 호출해아 하고, 객체가 완전이 생성되기 전까지는 일관성(Consistency)이 무너진 상태에 놓이게 된다.

</aside>

- `**자바빈즈 패턴**` : 매개변수가 없는 생성자로 객체를 만든 후, setter를 호출해 원하는 매개변수의 값을 설정

### 단점

---

- 객체 하나를 만들려면 여러 메서드를 호출해아 하고, 객체가 완전이 생성되기 전까지는 **일관성(Consistency)이 무너진 상태**에 놓이게 된다.
    - 점층적 생성자 패턴에서는 매개변수들이 유효한지를 **생성자에서만 확인**하면 **일관성을 유지**할 수 있었는데, **그 장치가 완전히 사라진 것**이다.

      이처럼, 일관성이 무너지는 문제 때문에 자바빈즈 패턴에서는 **클래스를 불변(Item17)으로 만들 수 없으며**, 스레드 안정성을 얻으려면 프로그래머가 **추가 작업**을 해줘야만 한다.


## [3]. 빌더 패턴 - 점층적 생성자 패턴과 자바빈즈 패턴의 장점만 취했다.

---

<aside>
💡 점층적 생성자 패턴의 안정성과 자바빈즈 패턴의 가독성을 겸비한 빌드 패턴

</aside>

- 클라이언트는 필요한 객체를 직접 만드는 대신, 필수 매개변수만으로 생성자(혹은 정적 팩터리)를 호출해 빌더 객체를 얻는다.
    
  ---

    ```java
    NutrituionFacts cocaCola = new NutritionFacts.Builder(240, 8) //필수 매개변수															 .carbohydrate(27).build();																							
    ```

- 빌더 패턴은( 파이썬과 스칼라에 있는 ) 명명된 선택적 매개변수[ Named Optional Parameters ]를 흉내낸 것이다.
- 빌더 패턴은 계층적으로 설계된 클래스와 함께 쓰기에 좋다.

### 단점

---

- 객체를 만드려면, 빌더부터 만들어야 한다.

  → 빌더 생성 비용이 크지는 않지만, 성능에 민감한 상황에서는 문제가 될 수 있다.

- 점층적 생성자 패턴에 비해 코드가 길다.

  → 매개변수가 4개 이상은 되어야 효율적이라고 볼 수 있다.

  → 하지만, **API는 시간이 지날수록 매개변수가 많아지는 경향이 있음을 명심하자!**


### 빌더 패턴의 계층적 사용

---

- 빌더 패턴은